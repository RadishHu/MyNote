# Linux常用命令

参考文章：

> * top命令：[每天一个linux命令(44):top命令](http://www.cnblogs.com/peida/archive/2012/12/24/2831353.html)

## 目录

> * [查看端口](#chapter1)
> * [查看磁盘使用情况](#chapter2)
> * [查看CPU和内存使用情况](#chapter3)

## 查看端口 <a id="chapter1"></a>

- lsof

  ```shell
  lsof -i:[端口号]
  ```

  lsof,list open files,列出当前系统打开文件

- netstat

  ```
  netstat -tunlp | grep [端口号]
  参数说明：
  -t (tcp)仅显示tcp相关选项
  -u (udp)仅显示udp相关选项
  -n 拒绝显示别名，能显示为数字的全部转化为数字
  -l 仅列出在Listen的服务状态
  -p 显示建立相关链接的程序名
  ```


## 查看磁盘使用情况 <a id="chapter2"></a>

### 查看磁盘整体情况

- 查看当前目录

  ```shell
  df -h
  ```

- 查看指定目录

  ```shell
  df -h /usr/
  ```

### 查看目录的磁盘使用情况

- 查看当前目录每个子目录的情况

  ```shell
  du --max-depth=1 -h
  ```

- 查看指定目录下，每个子目录的情况

  ```shell
  du --max-depth=1 -h /usr/
  ```

- 查看指定目录的使用情况

  ```shell
  du -sh /usr/
  ```

## 查看CPU和内存使用情况 <a id="chapter3"></a>

### top

top命令可以实时显示系统中各个进程的资源占用情况

- 命令格式：

  ```shell
  top [参数]
  ```

  > 参数说明：
  >
  > -b	批处理
  >
  > -c	显示完整的命令
  >
  > -I	忽略失效过程
  >
  > -s	保密模式
  >
  > -S	累积模式
  >
  > -i<时间>		设置间隔时间
  >
  > -u\<用户名>	指定用户名
  >
  > -p<进程号>	指定进程号
  >
  > -n<次数>	循环显示次数

- 显示信息的含义：

  ```
  top - 18:47:58 up 77 days,  2:54,  5 users,  load average: 0.38, 0.44, 0.54
  Tasks: 402 total,   1 running, 379 sleeping,   7 stopped,  15 zombie
  %Cpu(s):  9.9 us,  1.4 sy,  0.0 ni, 87.9 id,  0.3 wa,  0.0 hi,  0.4 si,  0.0 st
  KiB Mem : 32672216 total,   401396 free, 28198344 used,  4072476 buff/cache
  KiB Swap: 34275324 total, 14085356 free, 20189968 used.  2887836 avail Mem 
  
    PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                               
  17945 systemd+  20   0 9036784 299404   4364 S  32.5  0.9  11798:25 mongod 
  ```

  前五行是当前系统的整体哦统计信息，没行的含义：

  - 第一行，同uptime命令执行结果，具体参数含义如下：

    > * 18:47:58 当前系统时间
    > * up 77 days,  2:54 系统已经运行了77天2小时54分钟
    > * 5 users 当前有5个用户登录系统
    > * load average: 0.38, 0.44, 0.54 三个数字分别是1分钟、5分钟、15分钟负载情况

  - 第二行，Tasks,任务(进程)，具体含义：

    > 系统共有402个进程，其中处于运行中的有1个，379个在休眠，stoped状态的有7个，zombie状态(僵尸)的有15个

  - 第三行，cpu状态信息，具体含义：

    > * 9.9 us 用户空间占用CPU的百分比
    > * 1.4 sy 内核空间占用CPU的百分比
    > * 0.0 ni 改变过优先级的进程占用CPU的百分比
    > * 87.9 id 空闲CPU百分比
    > * 0.3 wa IO等待占用CPU的百分比
    > * 0.0 hi 硬中断(Hardware IRQ)占用CPU的百分比
    > * 0.4 si 软中断(Software Interrupts)占用CPU的百分比
    > * 0.0 st